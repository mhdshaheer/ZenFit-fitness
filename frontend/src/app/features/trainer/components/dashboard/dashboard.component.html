<div class="trainer-dashboard">
  <header class="trainer-header">
    <div>
      <p class="eyebrow">Trainer Console</p>
      <h1>Performance Overview</h1>
      <p class="subtitle">Daily signal across revenue, sessions, and client impact.</p>
    </div>
    <button class="primary-action">Share weekly snapshot</button>
  </header>

  <main class="trainer-main">
    <section class="kpi-grid">
      @for (card of kpiCards; track card.label) {
      <article class="kpi-card" [class.kpi-card--warning]="card.trend === 'down'">
        <div class="kpi-icon">{{ card.icon }}</div>
        <p class="kpi-label">{{ card.label }}</p>
        <p class="kpi-value">{{ card.value }}</p>
        <div class="kpi-meta" [class.kpi-meta--down]="card.trend === 'down'">
          <span>{{ card.trend === 'down' ? '-' : '+' }}{{ card.change }}%</span>
          <small>{{ card.helper }}</small>
        </div>
      </article>
      }
    </section>

    <section class="module">
      <div class="module__head">
        <div>
          <p class="module__eyebrow">Revenue trend</p>
          <h2>Trainer earnings</h2>
        </div>
        <div class="module__filters" role="group" aria-label="Revenue filters">
          @for (filter of revenueFilters; track filter.key) {
          <button type="button" class="filter-chip" [class.filter-chip--active]="activeRevenueFilter === filter.key"
            (click)="setRevenueFilter(filter.key)">
            {{ filter.label }}
          </button>
          }
        </div>
      </div>
      <apx-chart class="chart" [series]="revenueTrendChart.series!" [chart]="revenueTrendChart.chart!"
        [stroke]="revenueTrendChart.stroke!" [colors]="revenueTrendChart.colors!" [fill]="revenueTrendChart.fill!"
        [dataLabels]="revenueTrendChart.dataLabels!" [xaxis]="revenueTrendChart.xaxis!"
        [yaxis]="revenueTrendChart.yaxis!" [tooltip]="revenueTrendChart.tooltip!">
      </apx-chart>
    </section>

    <div class="module-grid">
      <section class="module">
        <div class="module__head">
          <div>
            <p class="module__eyebrow">Session health</p>
            <h2>Scheduled vs completed</h2>
          </div>
          <div class="module__filters" role="group" aria-label="Session filters">
            @for (filter of sessionFilters; track filter.key) {
            <button type="button" class="filter-chip" [class.filter-chip--active]="activeSessionFilter === filter.key"
              (click)="setSessionFilter(filter.key)">
              {{ filter.label }}
            </button>
            }
          </div>
        </div>
        <apx-chart class="chart" [series]="sessionVolumeChart.series!" [chart]="sessionVolumeChart.chart!"
          [plotOptions]="sessionVolumeChart.plotOptions!" [colors]="sessionVolumeChart.colors!"
          [xaxis]="sessionVolumeChart.xaxis!" [legend]="sessionVolumeChart.legend!"
          [tooltip]="sessionVolumeChart.tooltip!">
        </apx-chart>
      </section>

      <section class="module">
        <div class="module__head">
          <div>
            <p class="module__eyebrow">Program mix</p>
            <h2>Top performing formats</h2>
          </div>
          <span class="module__helper">Based on enrollment share</span>
        </div>
        <apx-chart class="chart" [series]="programPerformanceChart.series!" [chart]="programPerformanceChart.chart!"
          [labels]="programPerformanceChart.labels!" [plotOptions]="programPerformanceChart.plotOptions!"
          [colors]="programPerformanceChart.colors!" [legend]="programPerformanceChart.legend!">
        </apx-chart>
      </section>
    </div>

    <div class="module-grid">
      <section class="module">
        <div class="module__head">
          <div>
            <p class="module__eyebrow">Booking pulse</p>
            <h2>Requests vs confirmations</h2>
          </div>
          <div class="module__filters" role="group" aria-label="Booking filters">
            @for (filter of bookingFilters; track filter.key) {
            <button type="button" class="filter-chip" [class.filter-chip--active]="activeBookingFilter === filter.key"
              (click)="setBookingFilter(filter.key)">
              {{ filter.label }}
            </button>
            }
          </div>
        </div>
        <apx-chart class="chart" [series]="bookingDemandChart.series!" [chart]="bookingDemandChart.chart!"
          [stroke]="bookingDemandChart.stroke!" [colors]="bookingDemandChart.colors!" [fill]="bookingDemandChart.fill!"
          [dataLabels]="bookingDemandChart.dataLabels!" [xaxis]="bookingDemandChart.xaxis!"
          [legend]="bookingDemandChart.legend!" [tooltip]="bookingDemandChart.tooltip!">
        </apx-chart>
      </section>

      <section class="module">
        <div class="module__head">
          <div>
            <p class="module__eyebrow">Conversion quality</p>
            <h2>Booking outcomes</h2>
          </div>
          <span class="module__helper">Share of request status</span>
        </div>
        <apx-chart class="chart" [series]="bookingConversionChart.series!" [chart]="bookingConversionChart.chart!"
          [labels]="bookingConversionChart.labels!" [plotOptions]="bookingConversionChart.plotOptions!"
          [colors]="bookingConversionChart.colors!" [dataLabels]="bookingConversionChart.dataLabels!"
          [legend]="bookingConversionChart.legend!" [tooltip]="bookingConversionChart.tooltip!">
        </apx-chart>
      </section>
    </div>

    <div class="module-grid">
      <section class="module">
        <div class="module__head">
          <div>
            <p class="module__eyebrow">Client mission control</p>
            <h2>Goal completion trend</h2>
          </div>
          <span class="module__helper">Active cohorts</span>
        </div>
        <apx-chart class="chart" [series]="clientGoalChart.series!" [chart]="clientGoalChart.chart!"
          [stroke]="clientGoalChart.stroke!" [colors]="clientGoalChart.colors!"
          [dataLabels]="clientGoalChart.dataLabels!" [xaxis]="clientGoalChart.xaxis!" [yaxis]="clientGoalChart.yaxis!">
        </apx-chart>
      </section>

      <section class="module">
        <div class="module__head">
          <div>
            <p class="module__eyebrow">Client leaderboard</p>
            <h2>Consistency heroes</h2>
          </div>
          <span class="module__helper">Top sessions & completion</span>
        </div>
        <ul class="leaderboard">
          @for (client of clientLeaderboard; track client.name) {
          <li class="leaderboard__item">
            <div>
              <p class="leaderboard__name">{{ client.name }}</p>
              <p class="leaderboard__helper">{{ client.focus }}</p>
            </div>
            <div class="leaderboard__meta">
              <span>{{ client.sessions }} sessions</span>
              <div class="leaderboard__bar">
                <span [style.width.%]="client.completion"></span>
              </div>
            </div>
          </li>
          }
        </ul>
      </section>
    </div>
  </main>
</div>